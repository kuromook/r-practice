---
title: "「二項検定」割合に関する検定"
output: html_notebook
---

binom.test の読み方
確率0.5としたとき、コイントスを３０回行う２２回面がでる確率は0.01612である

AとBの映画のどちらが好きかをアンケートをとる
Aの映画を好きな人が22人、Bの映画を好きな人が８人だった
「AとBの映画を好きな割合に差があるように見える」

そこで以下の帰無仮説を立てる
「AとBの映画を好きな割合に差は無い」
これを検定し、p値<5%となれば帰無仮説は棄却される
「AとBの映画を好きな割合に差は無い」は間違いなので
「AとBは割合に差がある」ということになる
```{r}
binom.test(c(22,8), alternative = 'two.sided', p=0.5)

```

試しにどこまで行けば差がないと考えられるだろうか試してみる
P値は85%、いかにも差は無いと言えそうな通りに結果が出ている
```{r}
binom.test(c(14,16), alternative = 'two.sided', p=0.5)
```
10と20ではP値は9.8%
まだこれでも割合に差はないということになるようだ
```{r}
binom.test(c(10,20), alternative = 'two.sided', p=0.5)
```

例えばこんなことを考えてみよう

twitterでアンケートをとる
「ゲームは害があるか、ないか？」
８人が投票し、7人が「害がない」に票を入れ、残りは「害がある」に入れた
この場合のp値は0.07であり、有意水準を0.05とすると
0.05を上回っているため、有意性は認められない
```{r}
binom.test(c(7,1), alternative = 'two.sided', p=0.5)
```
この問題は厄介だ
8人程度のアンケートで7/8では、世論を（統計的に）確信することはできないということを言っている
しかし感覚的には、8人中の7ならいいじゃないか、と考える人は多いと思う

人との対話の中でそれでよしとしてきた人、管理職立場やコンサルで仕事の場でこのような判断をしてきた人なら
今更この考え方を受入れられないという人もいるかもしれない
あるいは逆に、プログラマのような立場で100%の再現性（今回の例でなら8中8）でなければ受け入れられない
という人もいるかもしれない

ちなみに8人中8ならこうなる
```{r}
binom.test(c(8,0), alternative = 'two.sided', p=0.5)
```

ちなみに 7/8の二項検定は python では下記のようになる
from scipy.stats import binom_test
binoma_test(7,8, 0.5)